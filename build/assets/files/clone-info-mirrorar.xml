<clones>
<systeminfo processor="nicad3" system="MirrorAR" granularity="functions" threshold="30%" minlines="10" maxlines="2500"/>
<cloneinfo npcs="146" npairs="7"/>
<runinfo ncompares="435" cputime="30"/>
<classinfo nclasses="3"/>

<class classid="1" nclones="3" nlines="12" similarity="91">
<source file="MirrorAR/MirrorAR/Assets/Scripts/BodyMaskRenderer.cs.ifdefed" startline="15" endline="32" pcid="76">
    public void OnNewFrame(Astra.ColorizedBodyFrame frame)
    {
        if (frame.Width == 0 ||
            frame.Height == 0)
        {
            return;
        }

        if (_lastFrameIndex == frame.FrameIndex)
        {
            return;
        }

        _lastFrameIndex = frame.FrameIndex;
        EnsureTexture(frame.Width, frame.Height);
        _texture.LoadRawTextureData(frame.DataPtr, (int)frame.ByteLength);
        _texture.Apply();
    }
</source>
<source file="MirrorAR/MirrorAR/Assets/Scripts/MaskedColorTextureRenderer.cs.ifdefed" startline="15" endline="34" pcid="97">
    public void OnNewFrame(Astra.MaskedColorFrame frame)
    {
        if (frame.Width == 0 ||
            frame.Height == 0)
        {
            return;
        }

        if (_lastFrameIndex == frame.FrameIndex)
        {
            return;
        }

        _lastFrameIndex = frame.FrameIndex;

        EnsureTexture(frame.Width, frame.Height);

        _texture.LoadRawTextureData(frame.DataPtr, (int)frame.ByteLength);
        _texture.Apply();
    }
</source>
<source file="MirrorAR/MirrorAR/Assets/Scripts/ColorTextureRenderer.cs.ifdefed" startline="17" endline="35" pcid="81">
    public void OnNewFrame(Astra.ColorFrame frame)
    {
        if (frame.Width == 0 ||
            frame.Height == 0)
        {
            return;
        }

        if (_lastFrameIndex == frame.FrameIndex)
        {
            return;
        }

        _lastFrameIndex = frame.FrameIndex;

        EnsureTexture(frame.Width, frame.Height);
        _texture.LoadRawTextureData(frame.DataPtr, (int)frame.ByteLength);
        _texture.Apply();
    }
</source>
</class>

<class classid="2" nclones="3" nlines="10" similarity="100">
<source file="MirrorAR/MirrorAR/Assets/Scripts/BodyMaskRenderer.cs.ifdefed" startline="34" endline="48" pcid="77">
    private void EnsureTexture(int width, int height)
    {
        if (_texture == null)
        {
            _texture = new Texture2D(width, height, Format, false);
            GetComponent<Renderer>().material.mainTexture = _texture;
            return;
        }

        if (_texture.width != width ||
            _texture.height != height)
        {
            _texture.Resize(width, height);
        }
    }
</source>
<source file="MirrorAR/MirrorAR/Assets/Scripts/ColorTextureRenderer.cs.ifdefed" startline="37" endline="51" pcid="82">
    private void EnsureTexture(int width, int height)
    {
        if (_texture == null)
        {
            _texture = new Texture2D(width, height, Format, false);
            GetComponent<Renderer>().material.mainTexture = _texture;
            return;
        }

        if (_texture.width != width ||
            _texture.height != height)
        {
            _texture.Resize(width, height);
        }
    }
</source>
<source file="MirrorAR/MirrorAR/Assets/Scripts/MaskedColorTextureRenderer.cs.ifdefed" startline="36" endline="50" pcid="98">
    private void EnsureTexture(int width, int height)
    {
        if (_texture == null)
        {
            _texture = new Texture2D(width, height, Format, false);
            GetComponent<Renderer>().material.mainTexture = _texture;
            return;
        }

        if (_texture.width != width ||
            _texture.height != height)
        {
            _texture.Resize(width, height);
        }
    }
</source>
</class>

<class classid="3" nclones="2" nlines="13" similarity="76">
<source file="MirrorAR/MirrorAR/Assets/Scripts/PoseUser.cs.ifdefed" startline="56" endline="76" pcid="100">
    public void OnNewFrame(Astra.BodyStream bodyStream, Astra.BodyFrame frame)
    {
        if (frame.Width == 0 ||
            frame.Height == 0)
        {
            return;
        }

        if (_lastFrameIndex == frame.FrameIndex)
        {
            return;
        }

        _lastFrameIndex = frame.FrameIndex;

        frame.CopyBodyData(ref _bodies);
        if (_bodies.Length > 0)
        {
            UpdateBone(_bodies[0]);
        }
    }
</source>
<source file="MirrorAR/MirrorAR/Assets/Scripts/SkeletonRenderer.cs.ifdefed" startline="41" endline="59" pcid="111">
    public void OnNewFrame(Astra.BodyStream bodyStream, Astra.BodyFrame frame)
    {
        if (frame.Width == 0 ||
            frame.Height == 0)
        {
            return;
        }

        if (_lastFrameIndex == frame.FrameIndex)
        {
            return;
        }

        _lastFrameIndex = frame.FrameIndex;

        frame.CopyBodyData(ref _bodies);
        UpdateSkeletonsFromBodies(_bodies);
        UpdateBodyFeatures(bodyStream, _bodies);
    }
</source>
</class>

</clones>
